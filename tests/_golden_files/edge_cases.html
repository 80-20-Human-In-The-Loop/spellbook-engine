<h1 id="edge-cases-test-document">Edge Cases Test Document</h1>
<p>This file tests various edge cases and potential issues.</p>
<h2 id="empty-spellblocks">Empty SpellBlocks</h2>
<div class="sb-alert sb-alert-info" role="alert">



</div>

<div class="sb-card sb-card-default">

    <div class="sb-card-body">

    </div>

</div>

<blockquote class="sb-quote sb-quote-default" >
    <div class="sb-quote-content"></div>

</blockquote>

<h2 id="spellblocks-with-only-whitespace">SpellBlocks with Only Whitespace</h2>
<div class="sb-alert sb-alert-info" role="alert">



</div>

<div class="sb-card sb-card-default">

    <div class="sb-card-header" >
        Empty

    </div>

    <div class="sb-card-body">

    </div>

</div>

<h2 id="malformed-spellblocks-should-be-ignored-or-handled-gracefully">Malformed SpellBlocks (Should Be Ignored or Handled Gracefully)</h2>
<p>This has no closing: </p>
<div class="sb-alert sb-alert-info" role="alert">


    <p>This text continues normally.</p>
<p>This has no opening but has closing</p>
</div>

<p>Mismatched: </p>
<div class="sb-alert sb-alert-info" role="alert">


    <div class="sb-render-error sb-render-error-unclosed_block" role="alert">
    <div class="sb-render-error-header">
        <span class="sb-render-error-icon">‚ö†Ô∏è</span>
        <strong class="sb-render-error-title">Unclosed SpellBlock</strong>
    </div>

    <div class="sb-render-error-body">
        <p class="sb-render-error-message">The SpellBlock 'alert' is missing its closing tag.</p>


        <div class="sb-render-error-suggestion">
            <strong>üí° How to fix:</strong> Add <code>&#123;~~&#125;</code> after your content to close the 'alert' block.
        </div>



        <div class="sb-render-error-details">
            <code>SpellBlock: alert</code>
        </div>



    </div>

    <div class="sb-render-error-footer">
        <a href="https://docs.example.com/spellblocks" class="sb-render-error-docs-link" target="_blank" rel="noopener">
            üìö Learn more about SpellBlocks
        </a>
    </div>
</div>

<p>content here {~ card ~}</p>
<div class="sb-render-error sb-render-error-unclosed_block" role="alert">
    <div class="sb-render-error-header">
        <span class="sb-render-error-icon">‚ö†Ô∏è</span>
        <strong class="sb-render-error-title">Unclosed SpellBlock</strong>
    </div>

    <div class="sb-render-error-body">
        <p class="sb-render-error-message">The SpellBlock 'card' is missing its closing tag.</p>


        <div class="sb-render-error-suggestion">
            <strong>üí° How to fix:</strong> Add <code>&#123;~~&#125;</code> after your content to close the 'card' block.
        </div>



        <div class="sb-render-error-details">
            <code>SpellBlock: card</code>
        </div>



    </div>

    <div class="sb-render-error-footer">
        <a href="https://docs.example.com/spellblocks" class="sb-render-error-docs-link" target="_blank" rel="noopener">
            üìö Learn more about SpellBlocks
        </a>
    </div>
</div>

<div class="sb-render-error sb-render-error-unclosed_block" role="alert">
    <div class="sb-render-error-header">
        <span class="sb-render-error-icon">‚ö†Ô∏è</span>
        <strong class="sb-render-error-title">Unclosed SpellBlock</strong>
    </div>

    <div class="sb-render-error-body">
        <p class="sb-render-error-message">The SpellBlock 'card' is missing its closing tag.</p>


        <div class="sb-render-error-suggestion">
            <strong>üí° How to fix:</strong> Add <code>&#123;~~&#125;</code> after your content to close the 'card' block.
        </div>



        <div class="sb-render-error-details">
            <code>SpellBlock: card</code>
        </div>



    </div>

    <div class="sb-render-error-footer">
        <a href="https://docs.example.com/spellblocks" class="sb-render-error-docs-link" target="_blank" rel="noopener">
            üìö Learn more about SpellBlocks
        </a>
    </div>
</div>

<h2>Nested SpellBlocks (Should Not Be Supported)</h2>
<p>{~ card title="Outer" ~}</p>
<div class="sb-render-error sb-render-error-unclosed_block" role="alert">
    <div class="sb-render-error-header">
        <span class="sb-render-error-icon">‚ö†Ô∏è</span>
        <strong class="sb-render-error-title">Unclosed SpellBlock</strong>
    </div>

    <div class="sb-render-error-body">
        <p class="sb-render-error-message">The SpellBlock 'card' is missing its closing tag.</p>


        <div class="sb-render-error-suggestion">
            <strong>üí° How to fix:</strong> Add <code>&#123;~~&#125;</code> after your content to close the 'card' block.
        </div>



        <div class="sb-render-error-details">
            <code>SpellBlock: card</code>
        </div>



    </div>

    <div class="sb-render-error-footer">
        <a href="https://docs.example.com/spellblocks" class="sb-render-error-docs-link" target="_blank" rel="noopener">
            üìö Learn more about SpellBlocks
        </a>
    </div>
</div>

<p>This is outer content.<br />
{~ alert type="info" ~}</p>
<div class="sb-render-error sb-render-error-unclosed_block" role="alert">
    <div class="sb-render-error-header">
        <span class="sb-render-error-icon">‚ö†Ô∏è</span>
        <strong class="sb-render-error-title">Unclosed SpellBlock</strong>
    </div>

    <div class="sb-render-error-body">
        <p class="sb-render-error-message">The SpellBlock 'alert' is missing its closing tag.</p>


        <div class="sb-render-error-suggestion">
            <strong>üí° How to fix:</strong> Add <code>&#123;~~&#125;</code> after your content to close the 'alert' block.
        </div>



        <div class="sb-render-error-details">
            <code>SpellBlock: alert</code>
        </div>



    </div>

    <div class="sb-render-error-footer">
        <a href="https://docs.example.com/spellblocks" class="sb-render-error-docs-link" target="_blank" rel="noopener">
            üìö Learn more about SpellBlocks
        </a>
    </div>
</div>

<p>Nested alert?</p>
</div>

<p _="~~">More outer content.<br /></p>
<h2 id="spellblocks-with-special-characters">SpellBlocks with Special Characters</h2>
<div class="sb-alert sb-alert-info" role="alert">


    <p>Content with special chars: &amp; &lt; &gt; " ' \n \t</p>
</div>

<div class="sb-card sb-card-default">

    <div class="sb-card-header" >
        Title with \

    </div>

    <div class="sb-card-body">
        <p>Content here.</p>
    </div>

</div>

<h2 id="multiple-spellblocks-on-same-line">Multiple SpellBlocks on Same Line</h2>
<div class="sb-alert sb-alert-info" role="alert">


    <p>First</p>
</div>

<div class="sb-alert sb-alert-info" role="alert">


    <p>Second</p>
</div>

<h2 id="spellblock-split-across-lines">SpellBlock Split Across Lines</h2>
<div class="sb-alert sb-alert-info" role="alert">


    <p>Content split across lines</p>
</div>

<h2 id="empty-attributes">Empty Attributes</h2>
<div class="sb-alert sb-alert-info" role="alert">


    <p>Empty type attribute</p>
</div>

<div class="sb-card sb-card-default">

    <div class="sb-card-body">
        <p>Empty strings</p>
    </div>

</div>

<h2 id="very-long-content">Very Long Content</h2>
<div class="sb-card sb-card-default">

    <div class="sb-card-header" >
        Long Content Test

    </div>

    <div class="sb-card-body">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
    </div>

</div>

<h2 id="unicode-content">Unicode Content</h2>
<div class="sb-alert sb-alert-info" role="alert">


    <p>Unicode content: ‰Ω†Â•Ω ŸÖÿ±ÿ≠ÿ®ÿß –ü—Ä–∏–≤–µ—Ç emoji: üéâ ‚ú® üöÄ</p>
</div>

<blockquote class="sb-quote sb-quote-default" >
    <div class="sb-quote-content"><p>‰∏ÉËª¢„Å≥ÂÖ´Ëµ∑„Åç (Fall seven times, stand up eight)</p></div>

    <footer class="sb-quote-footer">

        <cite class="sb-quote-author">‚Äî Japanese Proverb</cite>


    </footer>

</blockquote>

<h2 id="spellblock-followed-immediately-by-markdown">SpellBlock Followed Immediately by Markdown</h2>
<div class="sb-alert sb-alert-info" role="alert">


    <p>Alert content</p>
</div>

<p><strong>Bold text</strong> right after</p>
<h2 id="markdown-inside-spellblocks">Markdown Inside SpellBlocks</h2>
<div class="sb-card sb-card-default">

    <div class="sb-card-header" >
        Markdown Test

    </div>

    <div class="sb-card-body">
        <h1>Heading inside card?</h1>
<p><strong>Bold</strong> and <em>italic</em> and <code>code</code></p>
<ul>
<li>List item 1</li>
<li>List item 2</li>
</ul>
<blockquote>
<p>Blockquote inside card?</p>
</blockquote>
    </div>

</div>

<h2 id="real-world-mix">Real World Mix</h2>
<p>Here's a paragraph with <strong>formatting</strong> and a <a href="https://example.com">link</a>.</p>
<div class="sb-alert sb-alert-warning" role="alert">


    <p>Warning message here!</p>
</div>

<p>Another paragraph with <code>inline code</code> and more text.</p>
<pre><code class="language-python">def code_block():
    return &quot;protected&quot;
</code></pre>
<div class="sb-card sb-card-default">

    <div class="sb-card-header" >
        Summary

    </div>

    <div class="sb-card-body">
        <p>Final card with summary.</p>
    </div>

</div>

<p>End of document.</p>

<style>
/* alert */

.sb-alert {
    position: relative;
    padding: 16px 20px;
    margin: 16px 0;
    border: 2px solid;
    border-radius: 8px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    transition: box-shadow 0.2s ease, border-color 0.2s ease;
}

.sb-alert-info {
    background-color: color-mix(in srgb, var(--info-color, #2563eb) 10%, transparent);
    border-color: var(--info-color, #2563eb);
    color: var(--text-color, #1f2937);
}

.sb-alert-info:hover {
    border-color: color-mix(in srgb, var(--info-color, #2563eb) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--info-color, #2563eb) 20%, transparent);
}

.sb-alert-warning {
    background-color: color-mix(in srgb, var(--warning-color, #f59e0b) 10%, transparent);
    border-color: var(--warning-color, #f59e0b);
    color: var(--text-color, #1f2937);
}

.sb-alert-warning:hover {
    border-color: color-mix(in srgb, var(--warning-color, #f59e0b) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--warning-color, #f59e0b) 20%, transparent);
}

.sb-alert-danger {
    background-color: color-mix(in srgb, var(--error-color, #dc2626) 10%, transparent);
    border-color: var(--error-color, #dc2626);
    color: var(--text-color, #1f2937);
}

.sb-alert-danger:hover {
    border-color: color-mix(in srgb, var(--error-color, #dc2626) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--error-color, #dc2626) 20%, transparent);
}

.sb-alert-success {
    background-color: color-mix(in srgb, var(--success-color, #16a34a) 10%, transparent);
    border-color: var(--success-color, #16a34a);
    color: var(--text-color, #1f2937);
}

.sb-alert-success:hover {
    border-color: color-mix(in srgb, var(--success-color, #16a34a) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--success-color, #16a34a) 20%, transparent);
}

.sb-alert-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: none;
    border: none;
    font-size: 1.5em;
    line-height: 1;
    cursor: pointer;
    opacity: 0.5;
    padding: 0;
    width: 24px;
    height: 24px;
    color: inherit;
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.sb-alert-close:hover {
    opacity: 1;
    transform: scale(1.1);
}

.sb-alert strong {
    display: block;
    margin-bottom: 4px;
    font-weight: 600;
    color: var(--text-color, #1f2937);
}


/* card */

.sb-card {
    border: 2px solid var(--subtle-color, #e5e7eb);
    border-radius: 12px;
    margin: 16px 0;
    background-color: var(--surface-color, #f9fafb);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    transition: box-shadow 0.3s ease, transform 0.3s ease, border-color 0.3s ease;
}

.sb-card:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
    transform: translateY(-4px);
    border-color: var(--primary-color, #3b82f6);
}

.sb-card-header {
    position: relative;
    padding: 16px 20px;
    background-color: var(--background-color, #ffffff);
    border-bottom: 2px solid var(--subtle-color, #e5e7eb);
    font-weight: 600;
    font-size: 1.1em;
    color: var(--text-color, #1f2937);
}

.sb-card-header-collapsible {
    cursor: pointer;
    transition: background-color 0.2s ease;
    user-select: none;
}

.sb-card-header-collapsible:hover {
    background-color: color-mix(in srgb, var(--primary-color, #3b82f6) 5%, transparent);
}

.sb-card-body {
    padding: 20px;
    transition: max-height 0.3s ease, padding 0.3s ease, opacity 0.3s ease;
    color: var(--text-color, #1f2937);
}

.sb-card-body.collapsed {
    max-height: 0;
    padding: 0 20px;
    overflow: hidden;
    opacity: 0;
}

.sb-card-footer {
    padding: 12px 20px;
    background-color: var(--background-color, #ffffff);
    border-top: 2px solid var(--subtle-color, #e5e7eb);
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
}

.sb-card-collapse-btn {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
    pointer-events: none;
    transition: color 0.2s ease;
}

.sb-card-header-collapsible:hover .sb-card-collapse-btn {
    color: var(--primary-color, #3b82f6);
}

.sb-card-collapse-btn span {
    display: inline-block;
    transition: transform 0.3s ease;
}

.sb-card-collapse-btn span.rotated {
    transform: rotate(-90deg);
}

.sb-card-primary {
    border-color: var(--primary-color, #3b82f6);
}

.sb-card-primary .sb-card-header {
    background: linear-gradient(135deg, var(--primary-color, #3b82f6), color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--primary-color, #3b82f6);
}

.sb-card-primary:hover {
    border-color: color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black);
}

.sb-card-secondary {
    border-color: var(--secondary-color, #6b7280);
}

.sb-card-secondary .sb-card-header {
    background: linear-gradient(135deg, var(--secondary-color, #6b7280), color-mix(in srgb, var(--secondary-color, #6b7280) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--secondary-color, #6b7280);
}

.sb-card-secondary:hover {
    border-color: color-mix(in srgb, var(--secondary-color, #6b7280) 80%, black);
}

.sb-card-accent {
    border-color: var(--accent-color, #f59e0b);
}

.sb-card-accent .sb-card-header {
    background: linear-gradient(135deg, var(--accent-color, #f59e0b), color-mix(in srgb, var(--accent-color, #f59e0b) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--accent-color, #f59e0b);
}

.sb-card-accent:hover {
    border-color: color-mix(in srgb, var(--accent-color, #f59e0b) 80%, black);
}

.sb-card-default {
    /* Default styling already applied to base .sb-card */
}


/* quote */

.sb-quote {
    margin: 20px 0;
    padding: 16px 20px;
    border-left: 4px solid var(--primary-color, #3b82f6);
    background-color: var(--surface-color, #f9fafb);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    color: var(--text-color, #374151);
    transition: background-color 0.2s ease, border-left-color 0.2s ease, padding-left 0.2s ease, box-shadow 0.2s ease;
}

.sb-quote:hover {
    background-color: var(--subtle-color, #f3f4f6);
    border-left-color: color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black);
    padding-left: 24px;
    box-shadow: 0 2px 8px color-mix(in srgb, var(--primary-color, #3b82f6) 15%, transparent);
}

.sb-quote-content {
    font-style: italic;
    font-size: 1.05em;
    line-height: 1.6;
    margin: 0;
    color: var(--text-color, #374151);
}

.sb-quote-footer {
    margin-top: 12px;
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
}

.sb-quote-author {
    font-style: normal;
    font-weight: 500;
    color: var(--text-color, #374151);
}

.sb-quote-source {
    font-style: normal;
    color: var(--text-secondary-color, #6b7280);
}

.sb-quote-default {
    /* Default styling already applied to base .sb-quote */
}

.sb-quote-italic .sb-quote-content {
    font-style: italic;
    font-weight: 300;
}

.sb-quote-large {
    padding: 24px 28px;
}

.sb-quote-large .sb-quote-content {
    font-size: 1.25em;
    line-height: 1.7;
}

.sb-quote-large .sb-quote-footer {
    margin-top: 16px;
    font-size: 1em;
}


</style>