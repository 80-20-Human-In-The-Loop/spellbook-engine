<h1 id="complete-markdown-test-document">Complete Markdown Test Document</h1>
<p>This document contains <strong>all</strong> the markdown features to test the spellbook-engine parser.</p>
<h2 id="headings">Headings</h2>
<h3 id="level-3-heading">Level 3 Heading</h3>
<h4 id="level-4-heading">Level 4 Heading</h4>
<h5 id="level-5-heading">Level 5 Heading</h5>
<h6 id="level-6-heading">Level 6 Heading</h6>
<h2 id="text-formatting">Text Formatting</h2>
<p>This is <strong>bold text</strong> and this is <strong>also bold</strong>.</p>
<p>This is <em>italic text</em> and this is <em>also italic</em>.</p>
<p>This is <strong><em>bold and italic</em></strong> combined.</p>
<p>This is ~~strikethrough~~ text.</p>
<p>This is <code>inline code</code> in a sentence.</p>
<h2 id="lists">Lists</h2>
<h3 id="unordered-lists">Unordered Lists</h3>
<ul>
<li>First item</li>
<li>Second item</li>
<li>Nested item 1</li>
<li>Nested item 2<ul>
<li>Deeply nested item</li>
</ul>
</li>
<li>Third item</li>
</ul>
<h3 id="ordered-lists">Ordered Lists</h3>
<ol>
<li>First step</li>
<li>Second step</li>
<li>Sub-step A</li>
<li>Sub-step B</li>
<li>Third step</li>
</ol>
<h3 id="task-lists">Task Lists</h3>
<ul>
<li>[x] Completed task</li>
<li>[ ] Incomplete task</li>
<li>[ ] Another incomplete task</li>
</ul>
<h2 id="links-and-images">Links and Images</h2>
<p>This is a <a href="https://www.anthropic.com">link to Anthropic</a>.</p>
<p>This is a <a href="https://example.com" title="Example Domain">link with title</a>.</p>
<p>Reference-style links: <a href="https://docs.python.org" title="Python Documentation">See this reference</a></p>
<p>Images work similarly: <img alt="Alt text" src="https://via.placeholder.com/150" /></p>
<h2 id="blockquotes">Blockquotes</h2>
<blockquote>
<p>This is a blockquote.<br />
It can span multiple lines.</p>
<p>And multiple paragraphs.</p>
<p>Nested blockquotes:</p>
<blockquote>
<p>This is nested</p>
<blockquote>
<p>And this is deeply nested</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="code-blocks">Code Blocks</h2>
<h3 id="inline-code">Inline Code</h3>
<p>Use the <code>print()</code> function to output text.</p>
<h3 id="fenced-code-block-python">Fenced Code Block (Python)</h3>
<pre><code class="language-python">def hello_world():
    &quot;&quot;&quot;A simple function.&quot;&quot;&quot;
    message = &quot;Hello, World!&quot;
    print(message)
    return True

class SpellBlock:
    def __init__(self, name):
        self.name = name
</code></pre>
<h3 id="fenced-code-block-javascript">Fenced Code Block (JavaScript)</h3>
<pre><code class="language-javascript">function greet(name) {
  console.log(`Hello, ${name}!`);
  return {
    success: true,
    message: &quot;Greeted successfully&quot;
  };
}

const result = greet(&quot;Developer&quot;);
</code></pre>
<h3 id="fenced-code-block-bash">Fenced Code Block (Bash)</h3>
<pre><code class="language-bash">#!/bin/bash
echo &quot;Running tests...&quot;
pytest tests/ --cov=spellbook_engine
echo &quot;Tests complete!&quot;
</code></pre>
<h3 id="code-block-with-no-language">Code Block with No Language</h3>
<pre><code>This is a plain code block
  with indentation preserved
  and no syntax highlighting
</code></pre>
<h2 id="tables">Tables</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Supported</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Headers</td>
<td></td>
<td>All levels 1-6</td>
</tr>
<tr>
<td>Lists</td>
<td></td>
<td>Ordered, unordered, nested</td>
</tr>
<tr>
<td>Code blocks</td>
<td></td>
<td>Fenced and indented</td>
</tr>
<tr>
<td>SpellBlocks</td>
<td></td>
<td>Custom syntax</td>
</tr>
</tbody>
</table>
<p>Alignment options:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Left Aligned</th>
<th style="text-align: center;">Center Aligned</th>
<th style="text-align: right;">Right Aligned</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Left</td>
<td style="text-align: center;">Center</td>
<td style="text-align: right;">Right</td>
</tr>
<tr>
<td style="text-align: left;">A</td>
<td style="text-align: center;">B</td>
<td style="text-align: right;">C</td>
</tr>
</tbody>
</table>
<h2 id="horizontal-rules">Horizontal Rules</h2>
<p>Three or more hyphens:</p>
<hr />
<p>Three or more asterisks:</p>
<hr />
<p>Three or more underscores:</p>
<hr />
<h2 id="emphasis-and-combinations">Emphasis and Combinations</h2>
<p><em>You can combine </em><em>bold</em><em> inside italic.</em></p>
<p><strong>You can combine <em>italic</em> inside bold.</strong></p>
<p><strong><em>You can have both bold and italic.</em></strong></p>
<h2 id="line-breaks">Line Breaks</h2>
<p>This line ends with two spaces<br />
And continues here on a new line.</p>
<p>You can also use a backslash\<br />
for a line break.</p>
<h2 id="footnotes">Footnotes</h2>
<p>Here's a sentence with a footnote<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</p>
<p>Here's another with a longer footnote<sup id="fnref:longnote"><a class="footnote-ref" href="#fn:longnote">2</a></sup>.</p>
<h2 id="escaping-characters">Escaping Characters</h2>
<p>You can escape special characters with backslash:</p>
<p>* Not italic *</p>
<p># Not a heading</p>
<p>[Not a link](nowhere)</p>
<h2 id="html-in-markdown"><abbr title="Hyper Text Markup Language">HTML</abbr> in Markdown</h2>
<p>You can also use <strong><abbr title="Hyper Text Markup Language">HTML</abbr> tags</strong> directly.</p>
<div class="custom-class">
  <p>This is an HTML block.</p>
</div>

<h2 id="definition-lists">Definition Lists</h2>
<dl>
<dt>Term 1</dt>
<dd>Definition 1</dd>
<dt>Term 2</dt>
<dd>Definition 2a</dd>
<dd>Definition 2b</dd>
</dl>
<h2 id="abbreviations">Abbreviations</h2>
<p>The <abbr title="Hyper Text Markup Language">HTML</abbr> specification is maintained by the <abbr title="World Wide Web Consortium">W3C</abbr>.</p>
<h2 id="attributes-with-attr_list-extension">Attributes (with attr_list extension)</h2>
<h3 id="custom-id">Heading with ID</h3>
<p>Paragraph with custom class {.custom-class}</p>
<h3 id="link-with-attributes">Link with Attributes</h3>
<p><a class="external" href="https://example.com" target="_blank">Link with attributes</a></p>
<h2 id="complex-nested-structure">Complex Nested Structure</h2>
<ol>
<li>First ordered item<br />
   - Nested unordered item<br />
     &gt; With a blockquote<br />
     &gt; <code>python
     &gt; code = "inside blockquote"
     &gt;</code><br />
   - Another nested item</li>
<li>Second ordered item<br />
   - More nesting<ol>
<li>Ordered inside unordered</li>
<li>Another ordered item</li>
</ol>
</li>
</ol>
<h2 id="spellblocks-examples">SpellBlocks Examples</h2>
<div class="sb-alert sb-alert-info" role="alert">


    <p>This is an informational alert with <strong>markdown</strong> support!</p>
</div>

<div class="sb-card sb-card-default">

    <div class="sb-card-header" >
        Welcome Card

    </div>

    <div class="sb-card-body">
        <p>This is a card with a title and footer.</p>
<p>It can contain:<br />
- Multiple paragraphs<br />
- <strong>Formatted text</strong><br />
- And other markdown</p>
    </div>

    <div class="sb-card-footer">
        Updated 2025
    </div>

</div>

<blockquote class="sb-quote sb-quote-default" >
    <div class="sb-quote-content"><p>Imagination is more important than knowledge.</p></div>

    <footer class="sb-quote-footer">

        <cite class="sb-quote-author">â€” Albert Einstein</cite>


        <span class="sb-quote-source">, Physics Journal</span>

    </footer>

</blockquote>

<h2 id="mixed-content">Mixed Content</h2>
<p>Here's a paragraph followed by code:</p>
<pre><code class="language-python">def complex_example():
    # This is preserved even though
    # there are SpellBlocks nearby
    return &quot;Works correctly&quot;
</code></pre>
<p>And here's a SpellBlock after code:</p>
<div class="sb-alert sb-alert-success" role="alert">


    <p>Code blocks and SpellBlocks don't interfere with each other!</p>
</div>

<p>More text here.</p>
<h2 id="edge-cases">Edge Cases</h2>
<p>Empty emphasis: ** **</p>
<p>Multiple spaces    between    words.</p>
<p>Trailing spaces at end of line:</p>
<h2 id="final-section">Final Section</h2>
<p>This document tests comprehensive markdown parsing including:</p>
<ol>
<li>All standard markdown syntax</li>
<li>Code blocks that should be protected</li>
<li>SpellBlocks that should be processed</li>
<li>Nested structures</li>
<li>Edge cases</li>
</ol>
<p><strong>End of test document.</strong></p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>This is the first footnote.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:longnote">
<p>Here's one with multiple paragraphs.</p>
<p>Indent paragraphs to include them in the footnote.</p>
<p>You can add as many as you need.&#160;<a class="footnote-backref" href="#fnref:longnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>

<style>
/* alert */

.sb-alert {
    position: relative;
    padding: 16px 20px;
    margin: 16px 0;
    border: 2px solid;
    border-radius: 8px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    transition: box-shadow 0.2s ease, border-color 0.2s ease;
}

.sb-alert-info {
    background-color: color-mix(in srgb, var(--info-color, #2563eb) 10%, transparent);
    border-color: var(--info-color, #2563eb);
    color: var(--text-color, #1f2937);
}

.sb-alert-info:hover {
    border-color: color-mix(in srgb, var(--info-color, #2563eb) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--info-color, #2563eb) 20%, transparent);
}

.sb-alert-warning {
    background-color: color-mix(in srgb, var(--warning-color, #f59e0b) 10%, transparent);
    border-color: var(--warning-color, #f59e0b);
    color: var(--text-color, #1f2937);
}

.sb-alert-warning:hover {
    border-color: color-mix(in srgb, var(--warning-color, #f59e0b) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--warning-color, #f59e0b) 20%, transparent);
}

.sb-alert-danger {
    background-color: color-mix(in srgb, var(--error-color, #dc2626) 10%, transparent);
    border-color: var(--error-color, #dc2626);
    color: var(--text-color, #1f2937);
}

.sb-alert-danger:hover {
    border-color: color-mix(in srgb, var(--error-color, #dc2626) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--error-color, #dc2626) 20%, transparent);
}

.sb-alert-success {
    background-color: color-mix(in srgb, var(--success-color, #16a34a) 10%, transparent);
    border-color: var(--success-color, #16a34a);
    color: var(--text-color, #1f2937);
}

.sb-alert-success:hover {
    border-color: color-mix(in srgb, var(--success-color, #16a34a) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--success-color, #16a34a) 20%, transparent);
}

.sb-alert-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: none;
    border: none;
    font-size: 1.5em;
    line-height: 1;
    cursor: pointer;
    opacity: 0.5;
    padding: 0;
    width: 24px;
    height: 24px;
    color: inherit;
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.sb-alert-close:hover {
    opacity: 1;
    transform: scale(1.1);
}

.sb-alert strong {
    display: block;
    margin-bottom: 4px;
    font-weight: 600;
    color: var(--text-color, #1f2937);
}


/* card */

.sb-card {
    border: 2px solid var(--subtle-color, #e5e7eb);
    border-radius: 12px;
    margin: 16px 0;
    background-color: var(--surface-color, #f9fafb);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    transition: box-shadow 0.3s ease, transform 0.3s ease, border-color 0.3s ease;
}

.sb-card:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
    transform: translateY(-4px);
    border-color: var(--primary-color, #3b82f6);
}

.sb-card-header {
    position: relative;
    padding: 16px 20px;
    background-color: var(--background-color, #ffffff);
    border-bottom: 2px solid var(--subtle-color, #e5e7eb);
    font-weight: 600;
    font-size: 1.1em;
    color: var(--text-color, #1f2937);
}

.sb-card-header-collapsible {
    cursor: pointer;
    transition: background-color 0.2s ease;
    user-select: none;
}

.sb-card-header-collapsible:hover {
    background-color: color-mix(in srgb, var(--primary-color, #3b82f6) 5%, transparent);
}

.sb-card-body {
    padding: 20px;
    transition: max-height 0.3s ease, padding 0.3s ease, opacity 0.3s ease;
    color: var(--text-color, #1f2937);
}

.sb-card-body.collapsed {
    max-height: 0;
    padding: 0 20px;
    overflow: hidden;
    opacity: 0;
}

.sb-card-footer {
    padding: 12px 20px;
    background-color: var(--background-color, #ffffff);
    border-top: 2px solid var(--subtle-color, #e5e7eb);
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
}

.sb-card-collapse-btn {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
    pointer-events: none;
    transition: color 0.2s ease;
}

.sb-card-header-collapsible:hover .sb-card-collapse-btn {
    color: var(--primary-color, #3b82f6);
}

.sb-card-collapse-btn span {
    display: inline-block;
    transition: transform 0.3s ease;
}

.sb-card-collapse-btn span.rotated {
    transform: rotate(-90deg);
}

.sb-card-primary {
    border-color: var(--primary-color, #3b82f6);
}

.sb-card-primary .sb-card-header {
    background: linear-gradient(135deg, var(--primary-color, #3b82f6), color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--primary-color, #3b82f6);
}

.sb-card-primary:hover {
    border-color: color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black);
}

.sb-card-secondary {
    border-color: var(--secondary-color, #6b7280);
}

.sb-card-secondary .sb-card-header {
    background: linear-gradient(135deg, var(--secondary-color, #6b7280), color-mix(in srgb, var(--secondary-color, #6b7280) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--secondary-color, #6b7280);
}

.sb-card-secondary:hover {
    border-color: color-mix(in srgb, var(--secondary-color, #6b7280) 80%, black);
}

.sb-card-accent {
    border-color: var(--accent-color, #f59e0b);
}

.sb-card-accent .sb-card-header {
    background: linear-gradient(135deg, var(--accent-color, #f59e0b), color-mix(in srgb, var(--accent-color, #f59e0b) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--accent-color, #f59e0b);
}

.sb-card-accent:hover {
    border-color: color-mix(in srgb, var(--accent-color, #f59e0b) 80%, black);
}

.sb-card-default {
    /* Default styling already applied to base .sb-card */
}


/* quote */

.sb-quote {
    margin: 20px 0;
    padding: 16px 20px;
    border-left: 4px solid var(--primary-color, #3b82f6);
    background-color: var(--surface-color, #f9fafb);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    color: var(--text-color, #374151);
    transition: background-color 0.2s ease, border-left-color 0.2s ease, padding-left 0.2s ease, box-shadow 0.2s ease;
}

.sb-quote:hover {
    background-color: var(--subtle-color, #f3f4f6);
    border-left-color: color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black);
    padding-left: 24px;
    box-shadow: 0 2px 8px color-mix(in srgb, var(--primary-color, #3b82f6) 15%, transparent);
}

.sb-quote-content {
    font-style: italic;
    font-size: 1.05em;
    line-height: 1.6;
    margin: 0;
    color: var(--text-color, #374151);
}

.sb-quote-footer {
    margin-top: 12px;
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
}

.sb-quote-author {
    font-style: normal;
    font-weight: 500;
    color: var(--text-color, #374151);
}

.sb-quote-source {
    font-style: normal;
    color: var(--text-secondary-color, #6b7280);
}

.sb-quote-default {
    /* Default styling already applied to base .sb-quote */
}

.sb-quote-italic .sb-quote-content {
    font-style: italic;
    font-weight: 300;
}

.sb-quote-large {
    padding: 24px 28px;
}

.sb-quote-large .sb-quote-content {
    font-size: 1.25em;
    line-height: 1.7;
}

.sb-quote-large .sb-quote-footer {
    margin-top: 16px;
    font-size: 1em;
}


</style>