<h1 id="code-heavy-test-document">Code-Heavy Test Document</h1>
<p>This file tests that code blocks are properly protected from SpellBlock processing.</p>
<h2 id="python-code-block">Python Code Block</h2>
<pre><code class="language-python">def process_spellblock(content):
    &quot;&quot;&quot;
    This function mentions {~ alert ~} but it's in a code block
    so it should NOT be processed.
    &quot;&quot;&quot;
    # Even mentions like {~ card title=&quot;test&quot; ~} should be preserved
    return content.strip()

class Parser:
    def render(self):
        # This {~~} closing tag should also be preserved
        return &quot;{~ This is not processed ~}&quot;
</code></pre>
<h2 id="javascript-with-spellblock-syntax">JavaScript with SpellBlock Syntax</h2>
<pre><code class="language-javascript">const spellblock = &quot;{~ alert type='info' ~}&quot;;
const closing = &quot;{~~}&quot;;

// These should NOT be turned into actual SpellBlocks
function testParser() {
  const test = `
    {~ card title=&quot;Test&quot; ~}
    Content here
    {~~}
  `;
  return test;
}
</code></pre>
<h2 id="bash-scripts">Bash Scripts</h2>
<pre><code class="language-bash">#!/bin/bash
# Script that echoes SpellBlock-like syntax
echo &quot;{~ alert type='warning' ~}&quot;
echo &quot;Processing...&quot;
echo &quot;{~~}&quot;
</code></pre>
<h2 id="inline-code">Inline Code</h2>
<p>Use `</p>
<div class="sb-alert sb-alert-info" role="alert">


    <p><code>to create an alert. Close it with</code></p>
</div>

<p>`.</p>
<p>The syntax is: `</p>
<div class="sb-render-error sb-render-error-block_not_found" role="alert">
    <div class="sb-render-error-header">
        <span class="sb-render-error-icon">‚ùì</span>
        <strong class="sb-render-error-title">SpellBlock Not Found</strong>
    </div>

    <div class="sb-render-error-body">
        <p class="sb-render-error-message">The SpellBlock 'blockname' doesn't exist in your registry.</p>


        <div class="sb-render-error-suggestion">
            <strong>üí° How to fix:</strong> Check the spelling of 'blockname' or register this block in your SpellBlockRegistry.
        </div>



        <div class="sb-render-error-details">
            <code>SpellBlock: blockname</code>
        </div>



    </div>

    <div class="sb-render-error-footer">
        <a href="https://docs.example.com/spellblocks" class="sb-render-error-docs-link" target="_blank" rel="noopener">
            üìö Learn more about SpellBlocks
        </a>
    </div>
</div>

<p>`</p>
<h2 id="mixed-content-code-and-spellblocks">Mixed Content - Code and SpellBlocks</h2>
<p>Here's some text before code:</p>
<pre><code class="language-python">def example():
    # This {~ should not process ~}
    return True
</code></pre>
<p>Now a real SpellBlock after the code:</p>
<div class="sb-alert sb-alert-success" role="alert">


    <p>Code blocks are properly protected!</p>
</div>

<p>More code:</p>
<pre><code class="language-python">another_code = &quot;{~ fake spellblock ~}&quot;
</code></pre>
<p>And another real SpellBlock:</p>
<div class="sb-card sb-card-default">

    <div class="sb-card-header" >
        Real Card

    </div>

    <div class="sb-card-body">
        <p>This card should render, but the code blocks above should preserve their SpellBlock syntax.</p>
    </div>

</div>

<h2 id="edge-case-spellblock-immediately-after-code">Edge Case: SpellBlock Immediately After Code</h2>
<pre><code class="language-python">code = &quot;test&quot;
</code></pre>
<div class="sb-alert sb-alert-info" role="alert">


    <p>This alert comes right after a code block.</p>
</div>

<h2 id="plain-text-code-block">Plain Text Code Block</h2>
<pre><code>{~ This looks like a SpellBlock ~}
But it's in a plain code block
{~~}
</code></pre>
<h2 id="indented-code-markdown-style">Indented Code (Markdown Style)</h2>
<div class="sb-alert sb-alert-info" role="alert">


    <p>This is indented code</p>
</div>

<p>Should the above be processed? Let's test!</p>
<blockquote class="sb-quote sb-quote-default" >
    <div class="sb-quote-content"><p>Real SpellBlocks still work outside code blocks.</p></div>

    <footer class="sb-quote-footer">

        <cite class="sb-quote-author">‚Äî Test</cite>


    </footer>

</blockquote>

<style>
/* alert */

.sb-alert {
    position: relative;
    padding: 16px 20px;
    margin: 16px 0;
    border: 2px solid;
    border-radius: 8px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    transition: box-shadow 0.2s ease, border-color 0.2s ease;
}

.sb-alert-info {
    background-color: color-mix(in srgb, var(--info-color, #2563eb) 10%, transparent);
    border-color: var(--info-color, #2563eb);
    color: var(--text-color, #1f2937);
}

.sb-alert-info:hover {
    border-color: color-mix(in srgb, var(--info-color, #2563eb) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--info-color, #2563eb) 20%, transparent);
}

.sb-alert-warning {
    background-color: color-mix(in srgb, var(--warning-color, #f59e0b) 10%, transparent);
    border-color: var(--warning-color, #f59e0b);
    color: var(--text-color, #1f2937);
}

.sb-alert-warning:hover {
    border-color: color-mix(in srgb, var(--warning-color, #f59e0b) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--warning-color, #f59e0b) 20%, transparent);
}

.sb-alert-danger {
    background-color: color-mix(in srgb, var(--error-color, #dc2626) 10%, transparent);
    border-color: var(--error-color, #dc2626);
    color: var(--text-color, #1f2937);
}

.sb-alert-danger:hover {
    border-color: color-mix(in srgb, var(--error-color, #dc2626) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--error-color, #dc2626) 20%, transparent);
}

.sb-alert-success {
    background-color: color-mix(in srgb, var(--success-color, #16a34a) 10%, transparent);
    border-color: var(--success-color, #16a34a);
    color: var(--text-color, #1f2937);
}

.sb-alert-success:hover {
    border-color: color-mix(in srgb, var(--success-color, #16a34a) 80%, black);
    box-shadow: 0 2px 8px color-mix(in srgb, var(--success-color, #16a34a) 20%, transparent);
}

.sb-alert-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: none;
    border: none;
    font-size: 1.5em;
    line-height: 1;
    cursor: pointer;
    opacity: 0.5;
    padding: 0;
    width: 24px;
    height: 24px;
    color: inherit;
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.sb-alert-close:hover {
    opacity: 1;
    transform: scale(1.1);
}

.sb-alert strong {
    display: block;
    margin-bottom: 4px;
    font-weight: 600;
    color: var(--text-color, #1f2937);
}


/* card */

.sb-card {
    border: 2px solid var(--subtle-color, #e5e7eb);
    border-radius: 12px;
    margin: 16px 0;
    background-color: var(--surface-color, #f9fafb);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    transition: box-shadow 0.3s ease, transform 0.3s ease, border-color 0.3s ease;
}

.sb-card:hover {
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
    transform: translateY(-4px);
    border-color: var(--primary-color, #3b82f6);
}

.sb-card-header {
    position: relative;
    padding: 16px 20px;
    background-color: var(--background-color, #ffffff);
    border-bottom: 2px solid var(--subtle-color, #e5e7eb);
    font-weight: 600;
    font-size: 1.1em;
    color: var(--text-color, #1f2937);
}

.sb-card-header-collapsible {
    cursor: pointer;
    transition: background-color 0.2s ease;
    user-select: none;
}

.sb-card-header-collapsible:hover {
    background-color: color-mix(in srgb, var(--primary-color, #3b82f6) 5%, transparent);
}

.sb-card-body {
    padding: 20px;
    transition: max-height 0.3s ease, padding 0.3s ease, opacity 0.3s ease;
    color: var(--text-color, #1f2937);
}

.sb-card-body.collapsed {
    max-height: 0;
    padding: 0 20px;
    overflow: hidden;
    opacity: 0;
}

.sb-card-footer {
    padding: 12px 20px;
    background-color: var(--background-color, #ffffff);
    border-top: 2px solid var(--subtle-color, #e5e7eb);
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
}

.sb-card-collapse-btn {
    position: absolute;
    right: 16px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
    pointer-events: none;
    transition: color 0.2s ease;
}

.sb-card-header-collapsible:hover .sb-card-collapse-btn {
    color: var(--primary-color, #3b82f6);
}

.sb-card-collapse-btn span {
    display: inline-block;
    transition: transform 0.3s ease;
}

.sb-card-collapse-btn span.rotated {
    transform: rotate(-90deg);
}

.sb-card-primary {
    border-color: var(--primary-color, #3b82f6);
}

.sb-card-primary .sb-card-header {
    background: linear-gradient(135deg, var(--primary-color, #3b82f6), color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--primary-color, #3b82f6);
}

.sb-card-primary:hover {
    border-color: color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black);
}

.sb-card-secondary {
    border-color: var(--secondary-color, #6b7280);
}

.sb-card-secondary .sb-card-header {
    background: linear-gradient(135deg, var(--secondary-color, #6b7280), color-mix(in srgb, var(--secondary-color, #6b7280) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--secondary-color, #6b7280);
}

.sb-card-secondary:hover {
    border-color: color-mix(in srgb, var(--secondary-color, #6b7280) 80%, black);
}

.sb-card-accent {
    border-color: var(--accent-color, #f59e0b);
}

.sb-card-accent .sb-card-header {
    background: linear-gradient(135deg, var(--accent-color, #f59e0b), color-mix(in srgb, var(--accent-color, #f59e0b) 80%, black));
    color: #ffffff;
    border-bottom-color: var(--accent-color, #f59e0b);
}

.sb-card-accent:hover {
    border-color: color-mix(in srgb, var(--accent-color, #f59e0b) 80%, black);
}

.sb-card-default {
    /* Default styling already applied to base .sb-card */
}


/* quote */

.sb-quote {
    margin: 20px 0;
    padding: 16px 20px;
    border-left: 4px solid var(--primary-color, #3b82f6);
    background-color: var(--surface-color, #f9fafb);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    color: var(--text-color, #374151);
    transition: background-color 0.2s ease, border-left-color 0.2s ease, padding-left 0.2s ease, box-shadow 0.2s ease;
}

.sb-quote:hover {
    background-color: var(--subtle-color, #f3f4f6);
    border-left-color: color-mix(in srgb, var(--primary-color, #3b82f6) 80%, black);
    padding-left: 24px;
    box-shadow: 0 2px 8px color-mix(in srgb, var(--primary-color, #3b82f6) 15%, transparent);
}

.sb-quote-content {
    font-style: italic;
    font-size: 1.05em;
    line-height: 1.6;
    margin: 0;
    color: var(--text-color, #374151);
}

.sb-quote-footer {
    margin-top: 12px;
    font-size: 0.9em;
    color: var(--text-secondary-color, #6b7280);
}

.sb-quote-author {
    font-style: normal;
    font-weight: 500;
    color: var(--text-color, #374151);
}

.sb-quote-source {
    font-style: normal;
    color: var(--text-secondary-color, #6b7280);
}

.sb-quote-default {
    /* Default styling already applied to base .sb-quote */
}

.sb-quote-italic .sb-quote-content {
    font-style: italic;
    font-weight: 300;
}

.sb-quote-large {
    padding: 24px 28px;
}

.sb-quote-large .sb-quote-content {
    font-size: 1.25em;
    line-height: 1.7;
}

.sb-quote-large .sb-quote-footer {
    margin-top: 16px;
    font-size: 1em;
}


</style>